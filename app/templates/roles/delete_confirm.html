<!-- roles/delete_confirm.html -->
{% extends "layouts/base.html" %}
{% block title %}Delete Role{% endblock %}

{% block content %}
<div class="card shadow-sm">
    <div class="card-body">
        <h3 class="h4 text-danger">Confirm Delete</h3>

        <p class="mt-3">Are you sure you want to delete the following role?</p>

        <ul class="list-group mb-3">
            <li class="list-group-item"><strong>Name:</strong> {{ role.name }}</li>
            <li class="list-group-item"><strong>Description:</strong> {{ role.description or '-' }}</li>
            <li class="list-group-item">
                <strong>Permissions:</strong>
                {% if role.permissions %}
                    {{ role.permissions|length }} permission(s)
                {% else %}
                    None
                {% endif %}
            </li>
            <li class="list-group-item">
                <strong>Users:</strong>
                {% if role.users %}
                    {{ role.users|length }} user(s)
                {% else %}
                    None
                {% endif %}
            </li>
        </ul>

        {% if role.users %}
        <div class="alert alert-warning">
            <strong>⚠️ Warning:</strong> This role is currently assigned to {{ role.users|length }} user(s). Deleting it will remove the role from those users.
        </div>
        {% endif %}

        <form method="POST" action="{{ url_for('tbl_roles.delete', role_id=role.id) }}">
            {{ form.hidden_tag() }}
            <button type="submit" class="btn btn-danger">Delete</button>
            <a href="{{ url_for('tbl_roles.index') }}" class="btn btn-secondary">Cancel</a>
        </form>
    </div>
</div>
{% endblock %}